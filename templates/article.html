{% extends "base.html" %}

{% block title %}
{{ article.title }} - {{ super() }}
{% endblock title %}

{% block content %}
<script  language="javascript" type="text/javascript">
    function moveTOC() {
        var table_of_contents = document.getElementById('contents');
        var toc_sidebar = document.getElementById('toc_sidebar');
        if (table_of_contents && toc_sidebar)
            toc_sidebar.appendChild(table_of_contents);
    }
</script>
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="/{{ article.url }}"> {{ article.title }} {%if article.subtext %} <small> {{ article.subtext }} </small> {% endif %} </a></h1>
    </header>
</div>

<div class="row-fluid">
    <div class="span8 offset2 article-content">
        {{ article.content }}
        <aside>
        {% for an_artcile in dates %}
        {% if an_artcile.url == article.url %}
        {% set index = loop.index0 %}
        {% if not loop.first %}
        {% set next_article = dates[index-1] %}
        {% endif %}
        {% if not loop.last %}
        {% set previous_article = dates[index+1] %}
        {% endif %}
        <nav>
        <ul class="articles_timeline">
            {% if previous_article %}
            <li class="previous_article">« <a href="/{{ previous_article.url }}" title="Previous: {{ previous_article.title }}">{{ previous_article.title }}</a></li>
            {% endif %}
            {% if next_article %}
            <li class="next_article"><a href="/{{ next_article.url }}" title="Next: {{ next_article.title }}">{{ next_article.title }}</a> »</li>
            {% endif %}
        </ul>
        </nav>
        {% endif %}
        {% endfor %}
        </aside>
        {% if DISQUS_SITENAME and SITEURL and article.status != "draft" %}
        <section>
        <div class="accordion" id="accordion2">
            <div class="accordion-group">
                <div class="accordion-heading">
                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
                        Collapsible Group Item #1
                    </a>
                </div>
                <div id="collapseOne" class="accordion-body collapse">
                    <div class="accordion-inner">
                        <div class="comments">
            <h2>Comments !</h2>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                var disqus_identifier = "guide/install-fish-shell-mac-ubuntu/";
                var disqus_url = "{{ SITEURL }}/{{ article.url }}";
                (function() {
                 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                 dsq.src = 'http://{{ DISQUS_SITENAME }}.disqus.com/embed.js';
                 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                 })(); </script>
         </div>

                    </div>
                </div>
            </div>
        </div>
         </section>
         {% endif %}
     </div>
     <section>
     <div class="span2" style="float:right">
         {% if article.date %} 
         <h4>Published</h4>
         {% set day = article.date.strftime('%d')|int %}
         <time pubdate="pubdate" datetime="{{ article.date.isoformat() }}">{{ article.date.strftime('%b') }} {{ day }} {{- article.date.strftime(', %Y') }}</time>
         {% endif %}
         {% if article.modified %} 
         <h4>Last Updated</h4>
         {{ article.modified }}
         {% endif %}
         {% if article.category %}
         <h4>Category</h4>
         <a class="category-link" href="/categories.html#{{ category|replace(' ', '-')|e }}-ref">{{ article.category }}</a> 
         {% endif %}
         {% if article.tags %}
         <h4>Tags</h4>
         <ul class="list-of-tags tags-in-article"> 
             {% for tag in article.tags %}
             <li><a href="/tags.html#{{ tag|replace(' ', '-')|e }}-ref">{{ tag }}
                 {% for aTag, tagged_articles in tags if aTag == tag %}
                 <span>{{ tagged_articles|count }}</span>
                 {% endfor %}</a></li>
             {% endfor %}
         </ul>
         {% endif %}
     </div>
     </section>
 </div>
 </article>
 <script type="text/javascript" language="JavaScript">
     moveTOC(); 
     </script>
     {% endblock content %}
